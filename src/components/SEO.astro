---
/**
 * SEO Component - Handles all meta tags, Open Graph, Twitter Cards, and JSON-LD
 * 
 * Usage:
 * <SEO 
 *   title="Page Title"
 *   description="Page description"
 *   image="/og-image.jpg"
 *   type="website"
 * />
 */

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  type?: 'website' | 'article' | 'product';
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
  noindex?: boolean;
  nofollow?: boolean;
}

const {
  title = 'IRISE - Cockroach-Inspired Bio-Mimetic Robot',
  description = 'IRISE is a revolutionary bio-mimetic robot inspired by cockroach biology. Featuring advanced locomotion, extreme durability, and adaptive intelligence for search & rescue, exploration, and industrial applications.',
  image = '/og-image.jpg',
  type = 'website',
  publishedTime,
  modifiedTime,
  author = 'IRISE Team',
  noindex = false,
  nofollow = false,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const imageURL = new URL(image, Astro.site);
const siteName = 'IRISE';

// JSON-LD Structured Data for LLM optimization
const jsonLd = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'WebSite',
      '@id': `${Astro.site}#website`,
      'url': Astro.site?.toString(),
      'name': siteName,
      'description': description,
      'publisher': {
        '@id': `${Astro.site}#organization`
      }
    },
    {
      '@type': 'Organization',
      '@id': `${Astro.site}#organization`,
      'name': siteName,
      'url': Astro.site?.toString(),
      'logo': {
        '@type': 'ImageObject',
        'url': `${Astro.site}favicon.svg`
      },
      'sameAs': [
        // Add social media URLs here
      ]
    },
    {
      '@type': 'WebPage',
      '@id': `${canonicalURL}#webpage`,
      'url': canonicalURL.toString(),
      'name': title,
      'description': description,
      'isPartOf': {
        '@id': `${Astro.site}#website`
      },
      ...(publishedTime && { 'datePublished': publishedTime }),
      ...(modifiedTime && { 'dateModified': modifiedTime }),
    },
    {
      '@type': 'Product',
      'name': 'IRISE Robot',
      'description': 'A cockroach-inspired bio-mimetic robot featuring advanced locomotion systems, extreme durability, and adaptive AI intelligence.',
      'brand': {
        '@type': 'Brand',
        'name': 'IRISE'
      },
      'category': 'Robotics',
      'keywords': 'bio-mimetic robot, cockroach robot, search and rescue robot, exploration robot, adaptive robotics'
    }
  ]
};

const robotsContent = [
  noindex ? 'noindex' : 'index',
  nofollow ? 'nofollow' : 'follow',
].join(', ');
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="author" content={author} />
<meta name="robots" content={robotsContent} />
<link rel="canonical" href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={imageURL} />
<meta property="og:site_name" content={siteName} />
<meta property="og:locale" content="en_US" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonicalURL} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={imageURL} />

<!-- Article specific (for blog posts) -->
{publishedTime && <meta property="article:published_time" content={publishedTime} />}
{modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}
{author && <meta property="article:author" content={author} />}

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

<!-- Additional SEO -->
<meta name="theme-color" content="#00ff88" />
<meta name="color-scheme" content="dark light" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="manifest" href="/site.webmanifest" />

<!-- Preconnect to external resources -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
